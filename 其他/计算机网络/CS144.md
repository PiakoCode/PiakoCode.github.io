# CS144

version sponge 2021


**准备**

make时出现错误 ` error: 'out_of_range' was not declared in this scope`

解决方法: 在libsponge/util/buffer.hh中添加`#include <stdexcept>`一行


错误：变量‘std::array<char, 1025> ip’有初始值设定，但是类型不完全 build 91 | array<char, NI_MAXHOST> ip{};

解决方法:  在util.hh添加`#include <array>`
## Lab0

### webget

webget.cc
```cpp
void get_URL(const string &host, const string &path) {
    // Your code here.

    // You will need to connect to the "http" service on
    // the computer whose name is in the "host" string,
    // then request the URL path given in the "path" string.

    // Then you'll need to print out everything the server sends back,
    // (not just one call to read() -- everything) until you reach
    // the "eof" (end of file).

    // 创建socket
    std::shared_ptr<TCPSocket> socket = std::make_shared<TCPSocket>();

    // 绑定地址
    Address address(host, "http");

    // 连接
    socket->connect(address);

    // 发送请求
    string msg = "GET " + path +
                 " HTTP/1.1\r\n"
                 "Host: " +
                 host +
                 "\r\n"
                 "Connection: close\r\n\r\n";

    socket->write(msg);

    string result;
    while (!socket->eof()) {
        result = socket->read(); // 接收
        cout<<result;
    }
}
```

**相关知识:**

Http报文结构

```
GET path HTTP/1.1
Host: host
Connection: keep-alive // Connection: close
```

![](Picture/Pasted%20image%2020240110165532.png)

### An in-memory reliable byte stream

内存中可靠的字节流

code:

[p0 byte_stream](https://github.com/PiakoCode/sponge/commit/bb60ea4cda52b1cf391b4792f6156415b3830fcb)


## Lab 1

合并无关的分支
```shell
git merge master --allow-unrelated-histories
```
